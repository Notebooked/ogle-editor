<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>OGL Editor</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="editor">
        <div class="mode-list">
            <span onclick="setMode2D();" class="mode">2D</span>
            <span onclick="setMode3D();" class="mode">3D</span>
        </div>
        <div class="middle-section">
            <div class="hierarchy" id="hierarchy" style="width: 300px">
                <div class="hierarchy-list editor-pane" id="hierarchy-list"></div>
                <div class="vert-dragbar" id="hierarchy-dragbar"></div>
            </div>
            <div id="stage-container">
                <div class="toolbar">
                    <img src="editorimg/translate.png" alt="">
                    <img src="editorimg/rotate.png" alt="">
                    <div class="menu-dropdown">
                        <img id="menu" src="editorimg/menu.png" alt="">
                        <div id="menu-content">
                            <a class="menu-option" onclick="newProject();">New Project</a>
                            <a class="menu-option" onclick="saveProject();">Save Project</a>
                            <a class="menu-option" onclick="openProjectFolder();">Open Project Folder</a>
                        </div>
                    </div>
                </div>
                <canvas id="canvas-2d"></canvas>
                <canvas id="canvas-3d"></canvas>
            </div>
            <div class="properties" id="properties" style="width: 300px">
                <div class="vert-dragbar" id="properties-dragbar"></div>
                <div class="property-list editor-pane" id="property-list"></div>
            </div>
        </div>
        <div class="assets" id="assets" style="height: 400px">
            <div class="horiz-dragbar" id="assets-dragbar"></div>
            <div class="asset-list editor-pane" id="asset-list"></div>
        </div>
        <div id="dialog-container">
            <div id="new-project-dialog" class="dialog-box">
                <h1>New project!</h1>
                <span id="new-project-warning"></span>
                <div class="dialog-section">
                    <p>Project Folder</p>
                    <div>
                        <span id="new-project-span"></span>
                        <button onclick="chooseNewProjectFolder()">Choose</button>
                    </div>
                </div>
                <div class="dialog-section">
                    <p>Project Name</p>
                    <input type="text" id="new-project-name" name="new-project-name">
                </div>
                <div class="dialog-buttons">
                    <button onclick="cancelDialog()">Cancel</button>
                    <button onclick="confirmCreateProject()">Create</button>
                </div>
            </div>
        </div>
        <div id="context-menu"></div>
    </div>

    <script>
        const hierarchy = document.getElementById("hierarchy");
        const properties = document.getElementById("properties");
        const assets = document.getElementById("assets");

        const hierarchyDragbar = document.getElementById("hierarchy-dragbar");
        const propertiesDragbar = document.getElementById("properties-dragbar");
        const assetsDragbar = document.getElementById("assets-dragbar");

        let hierarchyWidth = 300;
        let propertiesWidth = 300;
        let assetsHeight = 400;

        let hierarchyDragging = false;
        let propertiesDragging = false;
        let assetsDragging = false;

        hierarchyDragbar.onmousedown = () => {
            hierarchyDragging = true;
        };
        propertiesDragbar.onmousedown = () => {
            propertiesDragging = true;
        };
        assetsDragbar.onmousedown = () => {
            assetsDragging = true;
        };
        document.addEventListener("mousemove", (e) => {
            if (hierarchyDragging === true) {
                hierarchyWidth += e.movementX;
                hierarchy.style.width = hierarchyWidth + 'px';
            }
            else if (propertiesDragging === true) {
                propertiesWidth -= e.movementX;
                properties.style.width = propertiesWidth + 'px';
            }
            else if (assetsDragging === true) {
                assetsHeight -= e.movementY;
                assets.style.height = assetsHeight + 'px';
            }
        });

        document.addEventListener("mouseup", (e) => {
            hierarchyDragging = false;
            propertiesDragging = false;
            assetsDragging = false;
        });
    </script>

    <script>
        const menu = document.getElementById("menu");
        const menuContent = document.getElementById("menu-content");
        document.addEventListener("click", (e) => {
            if (event.target !== menu) {
                menuContent.classList.remove("show-menu-content");
            }
            else {
                menuContent.classList.toggle("show-menu-content");
            }
        })
    </script>

    <!-- Neutralino.js client. This file is gitignored, 
        because `neu update` typically downloads it.
        Avoid copy-pasting it. 
        -->
    <script src="js/neutralino.js"></script>
    <!-- Your app's source files -->
    <script src="js/main.js"></script>
    <script src="js/projectloader.js"></script>
    <script src="js/assetmanager.js"></script>
    <script src="js/hierarchymanager.js"></script>
    <script src="js/propertiesmanager.js"></script>
    <script src="js/scenemanager.js"></script>
    <script src="js/contextmenu.js"></script>
    <script src="js/classloader.js"></script>
</body>

</html>